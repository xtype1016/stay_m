import 'package:flutter/material.dart';
import 'package:todo_app/todo_reg.dart';

void main() => runApp(MyApp());
//함수는 소문자, 클래스는 대문자로 시작. 언더 카멜케이스

//Todo 클래스
class Todo {
  bool isDone = false;
  String title;
  String memo;

  //Todo 생성자, 인스턴스 생성
  //생성자의 매개변수를 인스턴스의 변수로 할당, 아래 스크립트와 동일한 효과
  //Todo(bool isDone, String title)
  //{
  //  this.isDone = isDone;
  //  this.title  = title;
  //}
  Todo(this.title, this.memo);
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      title: 'ToDo List',
      theme: ThemeData(primaryColor: Colors.black54),
      home: TodoListPage(),
    );
  }
}

class TodoListPage extends StatefulWidget {
  //TodoListPageState 의 createState()가 TodoListpageState 클래스를 호출
  @override
  TodoListPageState createState() => TodoListPageState();
}

class TodoListPageState extends State<TodoListPage> {
  //할일 목록을 저장할 리스트
  final _items = <Todo>[];

  //할일 문자열 조작을 위한 컨트롤러
  var todoController = TextEditingController();

  @override
  void dispose() {
    //사용이 끝나면 해제
    todoController.dispose();
    super.dispose();
  }

  // void _addTodo(Todo todo) {
  //   setState(() {
  //     _items.add(todo);
  //     todoController.text = '';
  //   });
  // }

  void _deleteTodo(Todo todo) {
    setState(() {
      _items.remove(todo);
    });
  }

  void _toggleTodo(Todo todo) {
    setState(() {
      todo.isDone = !todo.isDone;
    });
  }

  Widget _buildItemWidget(Todo todo) {
    return ListTile(
      onTap: () => _toggleTodo(todo),
      title: Text(todo.title,
          style: todo.isDone
              ?
              //true
              TextStyle(
                  decoration: TextDecoration.lineThrough,
                  fontStyle: FontStyle.italic,
                  //false
                )
              : null),
      trailing: IconButton(
        icon: Icon(Icons.delete_forever),
        onPressed: () => _deleteTodo(todo),
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
        appBar: AppBar(
            title: Text("To Do List"),
            elevation: 0.0,
            leading: IconButton(
              onPressed: () {},
              icon: Icon(Icons.menu),
            ),
            actions: [
              IconButton(
                onPressed: () {},
                icon: Icon(Icons.settings),
              ),
            ]),
        body: Padding(
          padding: const EdgeInsets.all(8.0),
          child: Column(
            children: [
              Row(
                children: [
                  // Expanded(
                  //     child: TextField(
                  //   controller: todoController,
                  // )),
                  // ElevatedButton(
                  //   onPressed: () => _addTodo(Todo(todoController.text)),
                  //   child: Text('추가'),
                  // )
                ],
              ),
              Expanded(
                child: ListView(
                  children:
                      _items.map((todo) => _buildItemWidget(todo)).toList(),
                ),
              ),
              Align(
                  alignment: Alignment.bottomRight,
                  child: FloatingActionButton(
                    onPressed: () {
                      Navigator.push(
                        context,
                        MaterialPageRoute(builder: (context) => TodoRegPage()),
                      );
                    },
                    child: Icon(Icons.add),
                  )),
            ],
          ),
        ));
  }
}

class TodoRegPage extends StatefulWidget {
  const TodoRegPage({Key? key}) : super(key: key);

  @override
  State<TodoRegPage> createState() => _TodoRegPageState();
}

class _TodoRegPageState extends State<TodoRegPage> {
  // void _addTodo(Todo todo) {
  //   setState(() {
  //     _items.add(todo);
  //     todoController.text = '';
  //   });
  // }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('To To Reg'), elevation: 0.0,
          // leading: IconButton(
          //   onPressed: () {},
          //   icon: Icon(Icons.menu),
          // ),
          actions: [
            IconButton(
              onPressed: () {},
              icon: Icon(Icons.save_alt),
              tooltip: 'Save',
            ),
          ]),
      body: Center(
        child: Tooltip(message: 'Tooltip Test',
            child: Text('Second Page'),
        ),
      ),
    );
  }
}
